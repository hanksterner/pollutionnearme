=== PollutionNearMe Build Ledger ===
Entry 1
[2025-11-04 13:41 EST]
Event: Custom Domain Live, HTTPS Pending
Actions:
  • GitHub repository "pollutionnearme" created (public).
  • index.html committed with starter landing page.
  • GitHub Pages enabled at hanksterner.github.io/pollutionnearme/.
  • Custom domain pollutionnearme.org bound successfully.
  • DNS verified: four A records (@) → GitHub Pages IPs.
  • DNS verified: CNAME (www) → hanksterner.github.io.
  • Site resolves correctly at pollutionnearme.org.
  • GitHub Pages reports: "Certificate not yet issued."
Status: Candidate baseline live at custom domain, awaiting TLS provisioning.
Next Ritual: Monitor DNS propagation; enable "Enforce HTTPS" once certificate is issued.
Seal: Not yet — pending operational proof of HTTPS enforcement.
------------------------------------------------------------
=== PollutionNearMe Build Ledger ===
Entry 2
[2025-11-04 14:50 EST]
Event: HTTPS Enforced
Actions:
  • TLS certificate issued by GitHub Pages / Let’s Encrypt.
  • "Enforce HTTPS" enabled in repository Pages settings.
  • All traffic to pollutionnearme.org and www.pollutionnearme.org now redirects securely to HTTPS.
Status: Candidate baseline hardened with encryption; site is live and secure.
Next Ritual: Establish site scaffold (core routes and placeholders) to prepare for functional content.
Seal: Not yet — pending operational proof of scaffold and first data integration.
------------------------------------------------------------
=== PollutionNearMe Build Ledger ===
Entry 3
[2025-11-04 14:54 EST]
Event: Build Plan Established
Actions:
  • Formalized multi‑phase build plan to guide development of PollutionNearMe.
  • Plan includes site scaffold, data integration, brand identity, functional expansion, and public launch ritual.
  • Documented phases and actions for reproducibility and public accountability.
Status: Build plan logged; execution to proceed phase by phase with ledger updates at significant milestones.
Next Ritual: Begin Phase 1 — Site Skeleton Baseline (create placeholder routes and navigation).
Seal: Not yet — pending operational proof of scaffold deployment.
------------------------------------------------------------

=== PollutionNearMe Build Plan ===
Phase 1: Site Skeleton Baseline
  • Create minimal placeholder pages:
      - / → Landing page with mission statement.
      - /about → Purpose, credibility, and context.
      - /logs → Public ledger (already seeded).
      - /data → Placeholder for pollution data interface.
  • Add simple navigation linking these routes.
  • Commit and verify all routes resolve without 404s.

Phase 2: Data Integration Candidate
  • Define the YuE‑Interface container baseline for pollution data ingestion.
  • Connect /data route to a placeholder API response (mock JSON).
  • Log first operational proof of data output.

Phase 3: Brand & Identity Layer
  • Apply consistent design language (colors, typography, logo).
  • Add metadata for SEO and social sharing.
  • Harden copy to align with the project’s ritual tone.

Phase 4: Functional Expansion
  • Integrate live pollution data sources (e.g., AQI APIs).
  • Build interactive map or charts for /data.
  • Add user‑facing features (search by location, shareable reports).

Phase 5: Public Launch Ritual
  • Seal baseline once reproducibility and HTTPS stability are proven.
  • Announce via ledger, social channels, and brand assets.
  • Begin iterative updates with strict ledger documentation.
------------------------------------------------------------
=== PollutionNearMe Build Ledger ===
Entry 4
[2025-11-04 20:36 EST]
Event: Site Skeleton Baseline Established
Actions:
  • index.html, about.html, and data.html created with consistent structure and shared navigation.
  • nav.html introduced as single source of truth for navigation; dynamically included across all pages.
  • css/style.css and js/app.js linked to all pages for styling and future interactivity.
  • Verified that /, /about, and /data routes resolve without 404s under HTTPS.
Status: Scaffold operational; multi‑page structure reproducible and consistent.
Next Ritual: Prepare Phase 2 — Data Integration Candidate (connect /data to placeholder JSON feed).
Seal: Not yet — pending operational proof of data output.
------------------------------------------------------------
=== PollutionNearMe Build Ledger ===
Entry 5
[2025-11-04 21:32 EST]
Event: Data Integration Candidate
Actions:
  • Created /data/placeholder.json with mock AQI values.
  • Updated js/app.js to fetch and render JSON into <pre id="data-output">.
  • Verified operational proof: /data page displays structured JSON in browser.
Status: Candidate baseline for data output established; reproducible under HTTPS.
Next Ritual: Advance to Phase 3 — Brand & Identity Layer (apply design language, metadata, and ritual copy hardening).
Seal: Not yet — pending integration of live EPA data sources and validation of reproducibility.
------------------------------------------------------------
=== PollutionNearMe Build Ledger ===
Entry 6
[2025-11-04 22:07 EST]
Event: Brand & Identity Layer Established
Actions:
  • Implemented centralized css/style.css with Phase 3 identity variables (primary navy, secondary gray, accent green, alert red).
  • Applied consistent typography (Inter/Open Sans/Source Code Pro) across all pages.
  • Hardened copy: factual, concise mission on index; methodology and accountability sections on about; source + timestamp note on data.
  • Added metadata and Open Graph tags for SEO and sharing consistency.
  • Verified operational proof: site renders with unified header/footer, styled navigation, and branded data output block.
Status: Phase 3 baseline sealed; brand identity is clean, business‑like, and reproducible across all pages.
Next Ritual: Phase 4 — Data Visualization Candidate (introduce charts/tables for EPA datasets, apply accent/alert colors to thresholds).
Seal: Complete.
------------------------------------------------------------
=== PollutionNearMe Build Ledger ===
Entry 7
[2025-11-04 22:36 EST]
Event: Data Strategy Baseline Established
Actions:
  • Defined core data categories for integration:
      - Air Quality Index (AQI): hourly/daily values, pollutant breakdowns.
      - Toxic Release Inventory (TRI): facility-level chemical release reports.
      - Violation & Enforcement Data: Clean Air/Water/RCRA violations, inspections, penalties.
      - Superfund/Hazardous Sites: location, cleanup status, risk categories.
      - Water Quality: Safe Drinking Water Act compliance, contaminant levels.
  • Identified optional/future layers: greenhouse gas reporting, noise/light pollution, community health indicators.
  • Established Phase 4 candidate set: AQI + TRI + Violations as initial visualization focus.
  • Confirmed each category has clear units, thresholds, and natural visual mappings (time series, bar charts, leaderboards, maps).
Status: Data strategy baseline sealed; all future visualization and integration work will reference this schema.
Next Ritual: Phase 4 — Data Visualization Candidate (implement charts/tables for AQI, TRI, and Violations using placeholder feeds).
Seal: Complete.
------------------------------------------------------------
=== PollutionNearMe Build Ledger ===
Entry 8
[2025-11-05 16:14 EST]
Event: Phase 4 Execution Plan — Data Visualization Candidate
Actions:
  • Selected core categories for visualization: AQI, TRI, and Violations (per Entry 7 baseline).
  • Defined presentation strategy:
      - AQI → bar/line charts showing current values and trends, color‑coded by thresholds (green/red).
      - TRI → bar charts by chemical/facility, sortable tables for annual totals.
      - Violations → leaderboards/tables by facility or region, highlighting counts and penalties.
  • Established dual‑layer display:
      - Raw JSON remains visible for transparency.
      - Charts/tables provide elegant, jargon‑free summaries for readability.
  • Chosen Chart.js as lightweight, responsive library for initial candidate visuals.
  • Planned table styling with consistent headers, borders, and neutral colors for clarity.
Status: Execution plan sealed; ready to implement chart and table scaffolds in data.html and app.js.
Next Ritual: Implement AQI placeholder chart + table as first operational proof of visualization layer.
Seal: Not yet — pending live rendering of AQI chart and table.
------------------------------------------------------------
=== PollutionNearMe Build Ledger ===
Entry 9
[2025-11-05 18:15 EST]
Event: AQI Visualization Candidate Operational Proof
Actions:
  • Confirmed raw JSON feed renders correctly in <pre>.
  • Verified data table populates with city, AQI, status, and timestamp.
  • Implemented CSP‑safe bar visualization for AQI values (horizontal bar, color‑coded by threshold).
  • Observed successful rendering in browser; no GitHub Pages propagation issues.
Status: Candidate baseline achieved; AQI visualization is functional though minimal in design.
Next Ritual: Refine visualization elegance (scales, labels, responsive layout) and extend scaffolds for TRI and Violations.
Seal: Candidate.
------------------------------------------------------------
=== PollutionNearMe Build Ledger ===
Entry 10
[2025-11-05 18:29 EST]
Event: TRI & Violations Visualization Candidate Operational Proof
Actions:
  • Added /data/tri.json and /data/violations.json placeholder feeds.
  • Extended app.js to render TRI and Violations alongside AQI:
      - TRI: raw JSON, facility/chemical table, red bars scaled by release amount.
      - Violations: raw JSON, violation table, leaderboard rows by facility.
  • Confirmed CSP‑safe rendering with no external libraries.
  • Verified AQI, TRI, and Violations now all display raw + table + visualization.
Status: Candidate baseline achieved; Phase 4 visualization layer is functional across all three core categories.
Next Ritual: Refine elegance (labels, responsive layout, color cues) and prepare Phase 5 expansion for Superfund and Water Quality feeds.
Seal: Candidate.
------------------------------------------------------------
=== PollutionNearMe Build Ledger ===
Entry 11
[2025-11-05 21:30 EST]
Event: Phase 4.1 — Data Access Proof Checklist
Actions:
  • Defined test calls for each core EPA data source to confirm accessibility and schema.
  • Ritual: run one fetch/curl per source, log raw JSON, and document key fields.
  • Candidate endpoints:
      - Air Quality (AirNow API):
        https://www.airnowapi.org/aq/observation/zipCode/current/?format=application/json&zipCode=15213&API_KEY=YOUR_KEY
        → Expect: [{ "DateObserved", "AQI", "Category": { "Name" } }]
      - Toxic Release Inventory (TRI via Envirofacts):
        https://data.epa.gov/efservice/TRI_BASIC/STATE/PA/JSON
        → Expect: [{ "TRIFID", "CHEMICAL", "RELEASE_QTY", "YEAR" }]
      - Violations & Enforcement (ECHO):
        https://echo.epa.gov/api/facilities?state=PA&program=CAA
        → Expect: { "Results": [ { "FacilityName", "ViolationCount", "LastPenaltyAmount" } ] }
      - Superfund Sites (SEMS via Envirofacts):
        https://data.epa.gov/efservice/SEMS_SITE/STATE/PA/JSON
        → Expect: [{ "SITE_NAME", "NPL_STATUS", "CITY_NAME" }]
      - Water Quality (SDWIS):
        https://data.epa.gov/efservice/SDWIS_SYSTEM/STATE/PA/JSON
        → Expect: [{ "PWSID", "NAME", "POPULATION_SERVED", "VIOLATIONS" }]
  • Next Ritual: For each endpoint, run fetch/curl, capture JSON, and log schema in ledger.
Status: Checklist sealed; ready for operational proof runs.
Next Ritual: Execute test calls and log Entry 12 with raw JSON excerpts + schema notes.
Seal: Complete.
------------------------------------------------------------
=== PollutionNearMe Build Ledger ===
Entry 12
[2025-11-05 21:58 EST]
Event: TRI Data Access Proof
Actions:
  • Queried TRI_FORM_R for STATE=PA, REPORTING_YEAR=2022, ROWS=1:10.
  • Received valid JSON with release totals, transfer destinations, SIC/NAICS codes.
  • Confirmed schema includes: doc_ctrl_num, air_total_release, water_total_release, land_total_release, off_site_recycle_transfers, potw_name/address, off_site_loc_name/address.
  • Operational proof: Pennsylvania facilities with measurable releases and transfers are accessible.=== Entry 13 — 2025-11-06 14:26 EST ===
Event: Patched Visualization Script + Conceptual Refinement of Data Presentation
Actions:
• Corrected js/app.js by closing the Violations block and ensuring AQI/TRI/Violations sections are CSP‑safe.
• Verified operational proof: /data page now renders AQI, TRI, and Violations without console errors.
• Observed TRI feed populating correctly from data/tri.json.
• Initiated conceptual refinement: shift from raw technical tables toward citizen‑facing storytelling.
   - Replace jargon (e.g., “TRI”, “release_lbs”) with plain language (“Toxic Releases”, “Pollution released (pounds)”).
   - Contextualize numbers with relatable scales (e.g., “20 lbs ≈ weight of a car tire”, “19,530 lbs ≈ 10 pickup trucks”).
   - Apply severity color‑coding (green/yellow/red) and icons (factories, hazard symbols).
   - Frame data locally: “Your Area: [City] — Air quality is Good today, but factories released 19,530 lbs of toxic chemicals last year.”
   - Add actionable takeaways: “What this means for you” sections after each dataset.
Status: Technical fix sealed; conceptual refinement logged as guiding principle for presentation layer.
Next Ritual: Implement citizen‑friendly HTML blocks in data.html to replace raw JSON dumps with plain‑language summaries, icons, and contextual comparisons.
Seal: Candidate — pending operational proof of refined presentation layer.

Status: Candidate baseline for TRI feed achieved.
Next Ritual: Wire TRI_FORM_R schema into visualization layer (facility + chemical + release totals).
Seal: Candidate.
------------------------------------------------------------
=== PollutionNearMe Build Ledger ===
Entry 13 [2025-11-06 12:54 EST]
Event: TRI Data Snapshot Staged & Published
Actions:
• Staged EPA TRI scrape pull locally in D:\pollutionnearme\data\tri.json.
• Committed with message: "Entry 12: Stage TRI data snapshot in tri.json".
• Synced branch alignment: rebased local master → main, pushed to origin/main.
• Verified operational proof: tri.json accessible in repo at /data and served via GitHub Pages at https://pollutionnearme.org/data/tri.json.
Status: Candidate baseline achieved; reproducible under HTTPS with Pages propagation confirmed.
Next Ritual: Wire TRI schema into visualization layer (facility + chemical + release totals) and log operational proof of rendering.
Seal: Candidate.
------------------------------------------------------------
=== PollutionNearMe Build Ledger === 
Entry 14 [2025-11-06 22:48 EST]

Event: MVP Homepage Strategy Sealed — National Map, Snapshot Tiles, Search, Analytics, Ads

Actions:
• Finalized homepage concept: map centered on U.S. with top offenders visualized (TRI, AQI, Violations, Superfund).
• Snapshot tiles defined: Air Quality Today, Pollution Releases, Violations & Penalties, Superfund Sites.
• Search bar strategy confirmed: accepts ZIP, city, address, or business name; no IP-based auto-localization.
• Engagement flow established: national data provokes curiosity, search enables local exploration.
• Google Analytics setup snippet prepared for GA4 integration.
• AdSense ad blocks defined: horizontal banner + optional sidebar, styled for clarity and thematic fit.
• MVP scope locked: homepage will serve as orientation layer with map, snapshot, search, and monetization-ready layout.
• Next ritual: generate homepage wireframe HTML with all components scaffolded and ready for implementation.

Status: MVP homepage strategy sealed; ready to scaffold and commit.

Next Ritual: Generate and commit homepage wireframe (index.html) with map placeholder, snapshot tiles, search input, ad blocks, and mission statement.

Seal: Complete.
=== PollutionNearMe Build Ledger ===
Entry 15 [2025-11-08 11:57 EST]

Event: MVP Homepage Scaffold Committed — Tagline, Banner, Hamburger, Search

Actions:
• Updated index.html with corrected layout:
  - Tagline repositioned directly under site title for clearer hierarchy.
  - Hamburger menu anchored at top-left corner of site, outside banner, per UX convention.
  - Search bar centered in gray banner, widened to ~30 characters, styled with magnifying glass icon.
  - Footer links styled to match identity layer (neutral gray, hover brighten).
• Updated css/style.css with supporting rules:
  - Banner remains steel gray, search bar centered and prominent.
  - Hamburger positioned absolute top-left, nav hidden by default.
  - Tagline spacing adjusted (tight above, breathing room below).
• Verified operational proof: site renders under HTTPS with new layout, no console errors, consistent across pages.
• Committed and pushed to origin/main; GitHub Pages propagation confirmed.

Status:
Candidate baseline achieved for MVP homepage scaffold. Layout is functional and compliant, but not yet refined for elegance.

Next Ritual:
Document refinement tasks for post-MVP polish:
  - Elevate tagline typography and spacing for elegance.
  - Enhance search bar design (responsive width, icon integration, subtle shadow).
  - Refine hamburger/nav animation and placement for smoother UX.
  - Harmonize banner and header spacing for visual balance.

Seal:
Candidate — MVP scaffold sealed for reproducibility; refinement tasks logged for future iteration.
──────────────────────────────
Entry 13 — 2025-11-08 13:31 EST

Action: Added .gitignore rules to exclude large raw TRI data files from repo.
Details:
- Created .gitignore with patterns: data/tri-*_raw.json, data/tri-*_raw.csv
- Staged and committed as "Add .gitignore rules to exclude large raw TRI data files from repo"
- Pushed commit ee07312 to origin/main

Operational Proof:
✔ .gitignore present at repo root
✔ Remote branch main updated (0d90165..ee07312)
✔ Raw files excluded from version control, simplified outputs remain tracked

──────────────────────────────
──────────────────────────────
Entry 14 — 2025-11-08 16:15 EST
Event: EPA TRI Data Pull, Conversion, and Simplification Sequence Sealed
Actions:
• Pulled EPA TRI dataset (TRI_FORM_R) for Pennsylvania and staged locally as data/tri-pa_raw.json.
• Confirmed schema with numbered headers (e.g., "5.1 - FUGITIVE AIR", "5.2 - STACK AIR", "ON-SITE RELEASE TOTAL").
• Implemented normalizeRow() in scripts/simplify-tri.js to strip numeric prefixes and uppercase keys.
• Added numeric parsing for fugitive, stack, water, land, and total release fields.
• Ceremony commands executed:
  Remove-Item data/tri.json
  node scripts/simplify-tri.js data/tri-pa_raw.json data/tri.json
  Get-Content data/tri.json -TotalCount 20
  git add scripts/simplify-tri.js
  git add data/tri.json
  git commit -m "Entry 22 — 2025-11-08 16:10 EST: Map EPA headers (5.1–5.5, ON-SITE/OFF-SITE totals) in simplify-tri.js to resolve release_lbs values"
  git push origin main
• Operational proof: data/tri.json regenerated with 3427 records; facility and chemical names preserved; non-zero release_lbs observed (e.g., INTERSTATE CHEMICAL CO INC: 76 lbs, GRAFTECH USA LLC: 83.2 lbs).
Status: ✅ Candidate baseline sealed; reproducible pipeline from EPA CSV → tri-pa_raw.json → tri.json confirmed.
Next Ritual: Integrate tri.json into PollutionNearMe visualization layer, validate rendering of release metrics, and log operational proof of citizen-facing presentation.
Seal: Kurt + Copilot
──────────────────────────────
=== PollutionNearMe Build Ledger ===
Entry 15 [2025-11-08 22:30 EST]

Event: National TRI 2023 Integration & MVP Homepage Completion

Actions:
• Downloaded EPA TRI 2023 national CSV and converted to tri-2023_raw.json (78,589 rows).
• Simplified dataset into tri-2023.json for visualization baseline.
• Updated app.js to fetch tri-2023.json; snapshot tiles now display national totals.
• Integrated Leaflet.markercluster into index.html and app.js; map renders ~78k facilities with clustered markers for performance.
• Refined snapshot tile wording to plain language (“Pollution Released by Factories,” “Violations & Penalties,” “Toxic Cleanup Sites”) to ensure accessibility; deeper explanations deferred to FAQ post-MVP.
• Verified operational proof: map clusters expand/collapse correctly, snapshot totals match dataset, site remains performant under load.

Status: MVP homepage now complete with national data, clustering, snapshot tiles, search, analytics, and ads scaffolded.
Next Ritual: Harden copy and finalize plain-language presentation; prepare FAQ/learn-more layer after MVP launch.
Seal: Complete — MVP baseline achieved.
──────────────────────────────
=== PollutionNearMe Build Ledger ===
Entry 16 [2025-11-08 23:00 EST]

Event: Homepage Copy & Structure Refinement

Actions:
• Assigned clear title to map section: “Pollution in the United States” to distinguish visualization from data summary.
• Defined snapshot section title: “Key Pollution Data — 2023” with note that 2023 is the most recent national dataset available.
• Refined snapshot data points for MVP clarity:
   – Pollution by Factories (total toxic releases reported, excludes cars/livestock/natural sources).
   – Violations & Fines (enforcement actions and penalties).
   – Superfund Sites (official term retained, deeper explanation deferred to FAQ).
• Removed AQI from snapshot section for MVP, as AQI is local/regional and constantly changing.
• Identified duplication of snapshot sections in index.html; one will be deleted in next update to streamline layout.

Status: Homepage copy and structure updated for accessibility and clarity; MVP scope tightened to national releases, violations, and Superfund sites.

Seal: Complete — Entry 16 logged.
──────────────────────────────
=== PollutionNearMe Build Ledger ===
Entry 17 [2025-11-09 00:57 EST]

Event: Map & Snapshot Restoration After Expand Map Regression

Actions:
• Removed Expand Map button from index.html and confirmed script order and snapshot markup integrity.
• Updated style.css to ensure map visibility with display:block and verified layout consistency across browsers.
• Repaired app.js: normalized TRI key access, added fallback logging, and guaranteed map renders even if data fails.
• Verified operational proof: snapshot card populates TRI and Violations data correctly; Superfund placeholder remains.
• Confirmed map renders with fullscreen control and clustered markers using Leaflet and MarkerCluster.

Status: Functional baseline restored; reproducible across Chrome and Edge.
Next Ritual: Resume Phase 5 expansion — integrate Superfund and Water Quality feeds, refine snapshot copy, and prepare FAQ layer.
Seal: Complete — Entry 17 logged.
============================================================
=== PollutionNearMe Build Ledger ===
Entry 18 [2025-11-09 10:47 EST]
Event: Search Bar Geocoding Integration & MVP Feature Completion

Actions:
• Updated js/app.js geocode function to bias queries toward United States (countrycodes=us) with global fallback.
• Verified operational proof: ZIP codes (e.g., 17349), city names, business names, and full street addresses now resolve correctly.
• Map recenters and places temporary marker on successful queries; feedback messaging added for no-result and error cases.
• Confirmed search bar supports additional inputs: landmarks, neighborhoods, intersections, and natural features, though MVP scope focuses on ZIP/city/business/address.
• Snapshot tiles validated: TRI 2023 national dataset renders totals; Violations.json schema confirmed; Superfund placeholder remains pending integration.
• Footer styling polished with hierarchy and link set; accessibility checks passed (aria-expanded/aria-hidden, focus states, color contrast).
• Performance check: map clusters stable with ~78k facilities; search queries execute without degrading responsiveness.

Status:
MVP homepage now fully operational with hero map, snapshot tiles, functional hamburger menu, polished footer, and robust search bar integration. Core national datasets (TRI, Violations) are wired; Superfund integration and FAQ/learn layer remain next rituals.

Next Ritual:
• Implement Superfund snapshot with national count or “near me” lookup.
• Stage Learn/FAQ page explaining datasets and caveats.
• Harden copy for citizen-facing clarity and seal MVP baseline for public launch.

Seal: Complete — Entry 18 logged.
=============================================================
[Entry 19 | 2025-11-09 16:30 EST]
Step 2 integration complete.

- Superfund snapshot loader added to app.js
  • Fetches /data/superfund.json
  • Displays national_count in #snapshot-superfund tile
- Superfund map markers implemented
  • addSuperfundMarkers(map) function created
  • Blue circle markers with popups for site_name, city/state, NPL status
  • Called inside initMap()
- Bootstrap extended
  • DOMContentLoaded now calls loadSnapshots(), initMap(), initSearch(), initMenu()
- Search wiring implemented
  • #search-input and #search-button trigger geocodeAndCenter()
  • Nominatim client-side geocoding integrated
  • Map recenters and places temporary marker with formatted label
- Hamburger menu toggle added
  • Accessible ARIA attributes (aria-expanded, aria-hidden)
  • Escape key closes menu
  • Focus management on open/close
- Repository update
  • Committed as "Step 2: integrate Superfund snapshot and markers, plus search and menu wiring"
  • Pushed to origin/main
  • Large NPL_Boundaries.gdb flagged; removed in follow-up commit
  • .gitignore updated to exclude geodatabase
===========================================================
[ENTRY 20 — 2025-11-09T23:33:00Z]

— Build Status Catch‑Up —
• Removed legacy GLOBAL_CLUSTER_LAYER declaration; established separate GLOBAL_TRI_LAYER and GLOBAL_SUPERFUND_LAYER for clarity and reproducibility.
• Implemented distinct cluster options: TRI retains default scaling, Superfund tuned with maxClusterRadius=40 and disableClusteringAtZoom=6.
• Corrected marker blocks: TRI markers consistently added to GLOBAL_TRI_LAYER; Superfund markers consistently added to GLOBAL_SUPERFUND_LAYER.
• Applied distinct bubble colors: TRI markers green (scaled by release), Superfund markers blue (fixed radius).
• Added iconCreateFunction overrides and style.css rules for .tri-cluster-icon and .sf-cluster-icon, ensuring circular bubble visuals with color coding and counts.
• Updated snapshot card in index.html: retitled to “Key Pollution Data”, clarified footnote 1 to “National pollution data as of 2023 (EPA TRI dataset)”, retained footnote 2 for Superfund timing.
• Removed redundant “(as of …)” logic from Superfund snapshot in app.js; timing now conveyed solely via footnote.
• Verified national zoom behavior: TRI bubbles scatter as before; Superfund bubbles now render in correct locations with toggle control integration.
• Began design discussion on multi‑layer toggle control: Pollution, Violations, Superfund datasets each as independent layers, user can toggle visibility via UI buttons or Leaflet layer control.

— Operational Proof —
All changes tested in browser: map loads with TRI and Superfund layers distinct, snapshot card displays updated footnotes, cluster icons styled correctly. Ledger entry sealed for reproducibility.
================================================================
Entry 21 — 2025-11-10 14:28 EST
------------------------------------------------------------
• Ingest pipeline expanded:
  - Added scripts/fetch-npl-final.py with refined filtering logic.
  - Added scripts/fetch-npl-raw.py for raw dataset acquisition.
  - Added converters: convert-pdf-json.py, convert-pdf-ocr-json.py,
    convert-txt-json.py, extract-pdf-attachment.py.

• Dataset updates:
  - Added data/npl.raw.json (authoritative EPA ArcGIS feed).
  - Generated data/superfund.json baseline (1342 NPL Site records).
  - Added reference files: data/406185.xlsx, data/All Current Final NPL Sites-20251110105748.pdf,
    data/nplfinalbydate.txt.

• Git commit sealed:
  - Commit 185809c on main branch.
  - Message: "Add updated ingest script and baseline superfund.json dataset".
  - 12 files changed, 113678 insertions, 19881 deletions.

• Operational proof:
  - superfund.json created successfully with 1342 sites.
  - App.js filtering strategy documented to reduce to ~375 active Final NPL sites.
  - Logs/ingest-errors.txt records anomalies and count validation.

------------------------------------------------------------
Status: Baseline sealed. Build is up to date as of Entry 21.
=============================================================
Entry 22 — 2025-11-10T21:45:00Z
----------------------------------------
- Implemented Superfund markers block:
  • Filtered dataset for `npl_status === "NPL Site"` with valid listing_date and no deletion/deletion_notice.
  • Circle markers styled in blue (#1e88e5), radius 6, with popups showing site name, city/state, and status.
  • Layer added to GLOBAL_SUPERFUND_LAYER and toggle control.

- Implemented Superfund snapshot block:
  • Initial attempts to split active vs. deleted/proposed returned zero due to dataset scope.
  • Confirmed local `superfund.json` only contains active `"NPL Site"` entries (no Deleted/Proposed).
  • Simplified snapshot logic for MVP: display active site count only.
  • Snapshot tile now reports “1342 active sites” in sync with map markers.

- Decision logged:
  • For MVP, retain lean dataset with active sites only.
  • Former/proposed/deleted categories deferred until full EPA SEMS/NPL ingestion.
  • Ceremony preserved: map and snapshot aligned, consistent with dataset truth.

Status: Superfund map and data card operational for MVP. Limited informational depth acknowledged; expansion deferred to future dataset enrichment.
----------------------------------------
Entry 23 — 2025-11-10T22:42Z
----------------------------------------
- Executed fetch-violations.py against ECHO_EXPORTER.csv (~2GB).
- Extracted facility, city, state, lat, lon, violation type, count, and penalty.
- Filtered out facilities with zero penalties/violations or missing coordinates.
- Output: violations.json with 21,057 records, ready for map markers and snapshot tile.
- Ceremony preserved: dataset transformation documented, operational proof logged.
----------------------------------------
Entry 24 — 2025-11-11 00:58 EST
------------------------------------------------------------
Event: Data pipeline correction and deployment
- Patched fetch-violations.py to sanitize NaN/Infinity coordinates
- Preserved facilities with null lat/lon for snapshot inclusion
- Regenerated violations.json with 21,057 records (6 null coords)
- Deployed authoritative dataset to /data/violations.json
- Verified browser load: valid JSON, no NaN tokens
- Snapshot card now reflects full dataset:
  30,516 violations, $12,676,179,659 penalties
- Map rendering functional, though bubble scaling requires refinement
Status: Build baseline restored; ceremony sealed
------------------------------------------------------------
Entry 24 — 2025-11-11 00:58 EST
------------------------------------------------------------
Event: Data pipeline correction and deployment
- Patched fetch-violations.py to sanitize NaN/Infinity coordinates
- Preserved facilities with null lat/lon for snapshot inclusion
- Regenerated violations.json with 21,057 records (6 null coords)
- Deployed authoritative dataset to /data/violations.json
- Verified browser load: valid JSON, no NaN tokens
- Snapshot card now reflects full dataset:
  30,516 violations, $12,676,179,659 penalties
- Map rendering functional, though bubble scaling requires refinement
Status: Build baseline restored; ceremony sealed
------------------------------------------------------------
